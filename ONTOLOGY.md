> [!NOTE]
> **AI Generated Content Disclosure**
> This file was autonomously generated by **Antigravity** (an agentic AI coding assistant from Google DeepMind) on **2026-01-22**. The content is based on a comprehensive automated exploration and analysis of the repository's source code, configuration files, and documentation.

# OpenAs3D Ontology Report

## 1. Term Extraction

Based on a scan of the codebase (`src/visualizers`, `src/webview`, `src/services`), the following core terms form the vocabulary of the system:

| Term | Context | Frequency | Type |
|------|---------|-----------|------|
| **Codebase** | Extension, Visualizers | High | Root Concept |
| **CodeFile** | `types.ts`, Analyzer | High | Data |
| **CodeObject** | `types.ts`, Webview | High | Entity (DTO) |
| **VisualObject** | `objects/*` | High | Entity (Class) |
| **Zone** | Layout, Visuals | High | Spatial Container |
| **Dependency/Edge** | Manager, Visuals | High | Relationship |
| **Layout** | CodebaseVisualizer | Medium | Process |
| **Analyzer** | CodebaseVisualizer | Medium | Process |
| **Renderer** | Webview | Medium | System |
| **Sign** | Objects, Services | Medium | Entity |
| **Character** | Webview | Low | Avatar |

## 2. Concept Candidates

We can group these terms into four primary ontological categories:

### A. The World (Spatial/Environmental)
- **Zone**: A named, colored region of space (e.g., "Source", "Tests").
- **Layout**: The logic that assigns a CodeFile to a Position within a Zone.
- **Scene**: The container for all 3D objects (Three.js concept).

### B. The Inhabitants (Entities)
- **CodeFile**: The raw code data (size, language, lines).
- **CodeObject**: The visualized manifestation of a CodeFile.
- **Sign**: A marker that labels a Zone.
- **Character**: The user's avatar/viewpoint.

### C. The Connections (Relationships)
- **DependencyEdge**: A directed link between CodeObjects (import, extends, calls).
- **Graph**: The aggregate network of CodeFiles and Dependencies.

### D. The Machinery (Systems)
- **Analyzer**: Scans disk -> CodeFile[].
- **LayoutEngine**: CodeFile[] -> Position[].
- **Manager**: Controls lifecycle (add/remove/select) of Objects.

## 3. Responsibility Inference

### CodeFile (Data)
- **Responsibility**: Holds the "truth" about a file on disk.
- **Inputs**: FileSystem stats, File Content.
- **Outputs**: Metadata for visualization (size -> width/height).

### CodeObject / VisualObject (Entity)
- **Responsibility**: Represents a file in 3D space.
- **Inputs**: `CodeFile` data, Position.
- **Outputs**: 3D Mesh, Interaction events (hover/click).

### Zone (Space)
- **Responsibility**: Categorizes files and defines their neighborhood.
- **Definition**: Implicitly defined by `CodebaseLayoutEngine` config.

### DependencyManager (Relator)
- **Responsibility**: Visualizes the flow between objects.
- **Logic**: Draws bezier curves; handles "Circular" state; manages "Flow" animations.

## 4. Relationship Discovery

Explicit relationships found in code:

- **Zone CONTAINS CodeFiles** (Implicit via Layout Engine).
- **CodeObject REPRESENTS CodeFile** (1:1 mapping).
- **CodeObject HAS_A DependencyEdge TO CodeObject** (Directed graph).
- **SceneManager OWNS CodeObjectManager**.
- **CodeObjectManager OWNS VisualObjects**.
- **CodeObjectManager OWNS DependencyManager** (Actually, it instantiates it, though they are peers in responsibility, Manager delegates to DepManager).

## 5. Explicit Ontology Draft

This is the conceptual model of OpenAs3D as it exists today:

### Class: `World`
The root container.
- **Contains**: `Zone[]`, `Avatar`

### Class: `Zone`
A thematic region.
- **Properties**: Name (e.g., 'source'), Color, X/Z Center.
- **Contains**: `CodeObject[]` (spatially).
- **Marked By**: `Sign`.

### Class: `CodeObject` (extends `VisualObject`)
A physical block acting as a file.
- **Properties**: `filePath`, `language`, `size`, `lines`.
- **State**: `Selected`, `Focused`.
- **Capabilities**: Can be opened in Editor.

### Class: `Dependency`
A connection between blocks.
- **Properties**: `Type` (Import/Extends), `Weight`.
- **State**: `Circular` (Bool).
- **Visual**: Curved Line + Arrow.

### Process: `Ingestion`
1. **Analyze**: Disk -> `CodeFile[]`
2. **Classify**: `CodeFile` -> `Zone`
3. **Place**: `Zone` + Index -> `Position(x,z)`
4. **Instantiate**: `CodeFile` + `Position` -> `CodeObject`

## 6. Terminology Problems

1.  **CodeObject vs VisualObject**: `VisualObject` is the base class for 3D logic, `CodeObject` is the DTO interface. This is slightly confusing naming. `CodeEntity` might be better for the DTO.
2.  **CodebaseVisualizer vs WorldRenderer**: `CodebaseVisualizer` (backend) orchestrates the data stream. `WorldRenderer` (frontend) manages the Three.js loop. "Visualizer" implies rendering, but it's really a "Session Controller".
3.  **"Manifest"**: `VisualizerManifest` usage in `CodebaseVisualizer` suggests a plugin system that isn't fully realized or explained.

## 7. Recommendations

1.  **Reify "Zone"**: Currently, Zones are just config objects in `CodebaseLayoutEngine`. Promote `Zone` to a class that can calculate its own bounds and perhaps manage its own `Sign` and `Fence`.
2.  **Rename DTO**: Rename the `CodeObject` interface in shared types to `CodeEntityDTO` or `CodeRespresentation` to distinguish it from the active `VisualObject` classes.
3.  **Formalize "World"**: The Webview has `SceneManager`, `WorldRenderer`, and `CodeObjectManager`. A unified `World` class could encapuslate these to better model the "Environment" metaphor.
